<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Projekter</title>
  <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>
<h1>Projekter</h1>

<p th:text="${message}" style="color:green"></p>

<table border="1">
  <thead>
  <tr>
    <th>Navn</th>
    <th>Kunde</th>
    <th>Status</th>
    <th>Periode</th>
    <th>Handlinger</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="p : ${projects}">
    <td th:text="${p.name}"></td>
    <td th:text="${p.client}"></td>
    <td th:text="${p.status}"></td>
    <td>
      <span th:text="${p.startDate}"></span> -
      <span th:text="${p.endDate}"></span>
    </td>
    <td>
      <a th:href="@{|/projects/${p.id}/edit|}">Rediger</a> |
      <a th:href="@{|/projects/${p.id}/tasks|}">Opgaver</a>
      <a th:href="@{|/projects/${p.id}/pipeline|}">CI pipeline</a>
      <form th:action="@{|/projects/${p.id}/delete|}" method="post" style="display:inline">
        <button type="submit" onclick="return confirm('Slette projekt?')">Slet</button>
      </form>
    </td>
  </tr>
  </tbody>
</table>

<h2 th:text="${project.id} != null ? 'Ret projekt' : 'Nyt projekt'">
  Nyt projekt
</h2>

<form th:action="@{/projects}" th:object="${project}" method="post">
  <input type="hidden" th:field="*{id}">

  <label>Navn:
    <input type="text" th:field="*{name}">
  </label><br>
  <label>Kunde:
    <input type="text" th:field="*{client}">
  </label><br>
  <label>Startdato:
    <input type="date" th:field="*{startDate}">
  </label><br>
  <label>Slutdato:
    <input type="date" th:field="*{endDate}">
  </label><br>
  <label>Status:
    <select th:field="*{status}">
      <option th:each="s : ${T(dk.projekt.alphaprojecttool.model.ProjectStatus).values()}"
              th:value="${s}" th:text="${s}">
      </option>
    </select>
  </label><br>
  <button type="submit">Gem</button>
</form>

<p><a th:href="@{/reports}">Se rapport</a></p>
</body>
</html>
